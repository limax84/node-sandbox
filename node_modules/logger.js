/**
 * TODO Description
 * TODO Licence
 */
var winston = require('winston');
var moment = require('moment');

// Logging levels
var logLevels = { trace: 0, debug: 1, info: 2, warn: 3, error: 4 };

// Logging colors
var logColors = { trace: 'grey', debug: 'green', info: 'blue', warn: 'yellow', error: 'red' };
winston.addColors(logColors);

// Logging timestamp format function
var logTimestampFormat = function() {
    return moment().format('YYYY-MM-DD HH:mm:ss,SSS');
};

// Logger
var logger = new (winston.Logger)({
    levels: logLevels,
    transports: [

        // Transport to console
        new (winston.transports.Console)({
            level: 'trace',
            colorize: true,
            timestamp: logTimestampFormat
        }),

        // Transport to file
        new (winston.transports.File)({
            filename: '../somefile.log',
            level: 'trace',
            colorize: true,
            timestamp: logTimestampFormat
        })
    ]
});

// Logger level setter
logger.setLevel = function(level) {
    logger.transports.console.level = level;
    logger.transports.file.level = level;
};

// Export the logger
module.exports = logger;